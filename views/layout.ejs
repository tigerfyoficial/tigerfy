<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title><%= typeof title !== 'undefined' ? title : 'TigerFy' %></title>

<!-- ORDEM CERTA -->
<link rel="stylesheet" href="/css/reset.css">
<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/theme.gold.css?v=20251118-1"><!-- único tema -->
<link rel="stylesheet" href="/css/ui.topnav.css?v=20251118-1"><!-- por último -->

  <!-- Favicon “silencioso” já está tratado no server -->
  <link rel="stylesheet" href="/css/vercel-theme.css">
</head>
<body>
  <%- include('partials/topnav') %>
  <div class="tf-app">

    <!-- ===== TOP NAV / HEADER ===== -->
    <header class="tf-topbar" role="navigation" aria-label="Navegação principal">
      <a href="/dashboard" class="tf-brand" aria-label="TigerFy">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 2l9 16H3L12 2z" stroke="currentColor" stroke-width="1.4" fill="currentColor"/>
        </svg>
        <span class="tf-brand-text">TigerFy</span>
      </a>

      <nav class="tf-nav">
        <a href="/dashboard"   data-nav="dashboard">Dashboard</a>
        <a href="/ofertas"     data-nav="ofertas">Ofertas</a>
        <a href="/adquirentes" data-nav="adquirentes">API PIX</a>
        <a href="/conquistas"  data-nav="conquistas">Conquistas</a>
        <a href="/suporte"     data-nav="suporte" class="hide-mobile">Suporte</a>
      </nav>

      <div class="tf-right">
        <% if (userEmail) { %>
          <span class="tf-user"><%= userEmail %></span>
        <% } %>
        <a href="/logout" class="btn-primary btn-xs">Sair</a>

        <button class="tf-burger" aria-label="Abrir menu" aria-expanded="false">
          <span></span><span></span><span></span>
        </button>
      </div>
    </header>

    <!-- ===== CONTEÚDO ===== -->
    <main class="tf-root" id="app-main" class="tf-main" role="main">
      <%- body %>
    </main>

  </div>

  <!-- ===== JS mínimo p/ ativar item atual e menu mobile ===== -->
  <script>
    (function(){
      const path = location.pathname.replace(/\/+$/, '') || '/';
      document.querySelectorAll('.tf-nav a').forEach(a=>{
        try{
          const href = new URL(a.getAttribute('href', 2), location.origin).pathname.replace(/\/+$/, '');
          if (path === href || path.startsWith(href + '/')) a.classList.add('active');
        }catch(_){}
      });

      const burger = document.querySelector('.tf-burger');
      burger && burger.addEventListener('click', ()=>{
        const open = document.body.classList.toggle('nav-open');
        burger.setAttribute('aria-expanded', open ? 'true' : 'false');
      });
    })();
  </script>
</body>
</html>
