<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title><%= typeof title !== 'undefined' ? title : 'TigerFy' %></title>

  <!-- Fonte "Vercel-like". Se quiser usar Geist, basta trocar esta linha pelo CDN de Geist -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Seu tema base, se precisar manter utilitários -->
  <link rel="stylesheet" href="/css/vercel-theme.css">

  <style>
    :root{
      --bg: #0a0a0a;
      --fg: #ffffff;
      --muted: #a1a1a1;
      --border: rgba(255,255,255,0.10);
      --pill: rgba(255,255,255,0.06);
      --pill-border: rgba(255,255,255,0.12);
      --pill-active-bg: #ffffff;
      --pill-active-fg: #000000;
      --btn-border: rgba(255,255,255,0.16);
      --maxw: 1200px;
    }
    html,body{
      background:var(--bg); color:var(--fg);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      -webkit-font-smoothing:antialiased; margin:0;
    }

    /* ===== TOPNAV (estilo Vercel) ===== */
    .v-topnav{
      position: sticky; top: 0; z-index: 1000;
      backdrop-filter: blur(8px);
      background: rgba(10,10,10,0.8);
      border-bottom: 1px solid var(--border);
    }
    .v-topnav .wrap{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 10px 16px;
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px;
    }
    .v-brand{ display:flex; align-items:center; gap:16px; min-width:0; }
    .v-brand .brand{ display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; border-radius:6px; text-decoration:none; }
    .v-brand .brand svg{ display:block; }

    .v-nav{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
    .v-nav a{
      display:inline-flex; align-items:center; height:32px; padding:0 12px;
      border-radius:999px; text-decoration:none; font-size:13px;
      color:var(--fg); background:var(--pill); border:1px solid var(--pill-border);
      transition:background .15s ease, color .15s ease, border-color .15s ease;
      white-space: nowrap;
    }
    .v-topnav .v-nav a:hover{ border-color: rgba(255,255,255,0.22); }
    /* ativo: vale para 'active' vinda do server OU adicionada via JS */
    .v-topnav .v-nav a.active{
      background:var(--pill-active-bg); color:var(--pill-active-fg); border-color:transparent;
    }

    .v-right{ display:flex; align-items:center; gap:10px; min-width:0; }
    .v-right .email{ color:var(--muted); font-size:12.5px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:38vw; }
    .btn{ display:inline-flex; align-items:center; height:30px; padding:0 12px; border-radius:8px; text-decoration:none; font-size:12.5px; font-weight:600; }
    .btn-ghost{ color:var(--fg); border:1px solid var(--btn-border); background:transparent; }
    .btn-ghost:hover{ background:#fff; color:#000; border-color:transparent; }

    /* ===== CONTEÚDO ===== */
    .v-container{ max-width:var(--maxw); margin:0 auto; padding:28px 16px 60px 16px; }

    /* Evita que qualquer .active global afete fora do topnav */
    :where(.v-topnav) :where(.active){ /* escopo apenas no topnav */ }
  </style>
</head>
<body>

  <!-- ===== TOPNAV QUE VOCÊ PEDIU ===== -->
  <nav class="v-topnav">
    <div class="wrap">
      <div class="v-brand">
        <a href="/dashboard" class="brand" aria-label="Home">
          <svg viewBox="0 0 1155 1000" width="16" height="16" fill="#fff" aria-hidden="true"><path d="M577.3 0L1154.6 1000H0z"/></svg>
        </a>
        <div class="v-nav">
          <a href="/dashboard"   class="<%= typeof active !== 'undefined' && active === 'dashboard' ? 'active' : '' %>">Dashboard</a>
          <a href="/ofertas"     class="<%= typeof active !== 'undefined' && active === 'ofertas'    ? 'active' : '' %>">Ofertas</a>
          <a href="/adquirentes" class="<%= typeof active !== 'undefined' && active === 'api_pix'    ? 'active' : '' %>">API PIX</a>
          <a href="/conquistas"  class="<%= typeof active !== 'undefined' && active === 'conquistas' ? 'active' : '' %>">Conquistas</a>
          <a href="/suporte"     class="<%= typeof active !== 'undefined' && active === 'suporte'    ? 'active' : '' %>">Suporte</a>
        </div>
      </div>
      <div class="v-right">
        <% if (userEmail) { %>
          <span class="email"><%= userEmail %></span>
          <a class="btn btn-ghost" href="/logout">Sair</a>
        <% } else { %>
          <a class="btn btn-ghost" href="/login">Entrar</a>
        <% } %>
      </div>
    </div>
  </nav>

  <!-- ===== CONTEÚDO DA PÁGINA ===== -->
  <main class="v-container" role="main">
    <%- body %>
  </main>

  <!-- Ativo automático por URL (funciona mesmo sem setar 'active' no server) -->
  <script>
    (function(){
      const path = location.pathname.replace(/\/+$/,'') || '/';
      document.querySelectorAll('.v-topnav .v-nav a').forEach(a=>{
        try{
          const href = new URL(a.getAttribute('href'), location.origin)
            .pathname.replace(/\/+$/,'');
          const isActive = (path === href) || (href !== '/' && path.startsWith(href + '/'));
          if(isActive) a.classList.add('active');
        }catch(_){}
      });
    })();
  </script>
</body>
</html>
