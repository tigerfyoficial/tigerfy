<canvas id="bgParticles"></canvas>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background: var(--bg-color);
    color: var(--text-color);
    font-family: "Inter", sans-serif;
    overflow-x: hidden;
    transition: background 0.3s, color 0.3s;
  }

  * { box-sizing: border-box; }
  ::-webkit-scrollbar { display: none; }

  /* âœ¨ fundo animado */
  #bgParticles {
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100vh;
    z-index: 0;
    pointer-events: none;
    mix-blend-mode: screen;
    background-image: radial-gradient(rgba(255,255,255,0.03) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* ðŸ”¹ switch fixo no topo direito */
  .theme-toggle {
    position: fixed;
    top: 22px;
    right: 32px;
    z-index: 100;
  }

  .toggle-label {
    cursor: pointer;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,204,0,0.25);
    border-radius: 50%;
    width: 42px;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    backdrop-filter: blur(6px);
  }

  .toggle-label:hover {
    background: rgba(255,204,0,0.08);
    box-shadow: 0 0 10px rgba(255,204,0,0.3);
  }

  #moon { display: none; }
  [data-theme="light"] #sun { display: none; }
  [data-theme="light"] #moon { display: block; }
</style>

<!-- ðŸŒ— AlternÃ¢ncia de tema (topo fixo) -->
<div class="theme-toggle">
  <input type="checkbox" id="themeSwitch" hidden>
  <label for="themeSwitch" class="toggle-label">
    <svg id="sun" width="20" height="20" fill="none" stroke="#ffcc00" stroke-width="2">
      <circle cx="10" cy="10" r="4"/>
      <path d="M10 1v2M10 17v2M3.22 3.22l1.42 1.42M15.36 15.36l1.42 1.42M1 10h2M17 10h2M3.22 16.78l1.42-1.42M15.36 4.64l1.42-1.42"/>
    </svg>
    <svg id="moon" width="20" height="20" fill="none" stroke="#ffcc00" stroke-width="2">
      <path d="M21 12.79A9 9 0 0112.21 3 7 7 0 0012 21a9 9 0 009-8.21z"/>
    </svg>
  </label>
</div>

<script>
  /* ======= partÃ­culas douradas ======= */
  const canvas = document.getElementById('bgParticles');
  const ctx = canvas.getContext('2d', { alpha: true });
  let w, h, DPR = window.devicePixelRatio || 1;

  function resize() {
    w = innerWidth; h = innerHeight;
    canvas.width = w * DPR; canvas.height = h * DPR;
    ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
  }
  resize();
  addEventListener('resize', resize, { passive: true });

  const particles = [];
  for (let i = 0; i < 55; i++) {
    particles.push({
      x: Math.random() * w,
      y: Math.random() * h,
      r: Math.random() * 1.3 + 0.5,
      dx: (Math.random() - 0.5) * 0.25,
      dy: (Math.random() - 0.5) * 0.25
    });
  }

  function draw() {
    ctx.clearRect(0, 0, w, h);
    const theme = document.documentElement.getAttribute('data-theme');
    ctx.fillStyle = theme === 'light'
      ? 'rgba(200,160,0,0.18)'
      : 'rgba(255,204,0,0.22)';
    for (const o of particles) {
      ctx.beginPath();
      ctx.arc(o.x, o.y, o.r, 0, Math.PI * 2);
      ctx.fill();
      o.x += o.dx;
      o.y += o.dy;
      if (o.x < 0 || o.x > w) o.dx *= -1;
      if (o.y < 0 || o.y > h) o.dy *= -1;
    }
    requestAnimationFrame(draw);
  }
  draw();

  /* ======= alternÃ¢ncia de tema sincronizada ======= */
  const toggle = document.getElementById('themeSwitch');
  const savedTheme = localStorage.getItem('theme') || 'dark';
  document.documentElement.setAttribute('data-theme', savedTheme);
  toggle.checked = savedTheme === 'light';

  toggle.addEventListener('change', () => {
    const theme = toggle.checked ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
  });
</script>
