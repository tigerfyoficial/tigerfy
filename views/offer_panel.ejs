<%- include('partials/visual_hottrack') %>

<main class="tiger-offer-shell">
  <!-- BREADCRUMB + TÍTULO + AÇÃO -->
  <header class="tf-header">
    <div class="tf-head-left">
      <nav class="tf-breadcrumb">
        <a href="/ofertas">Minhas Ofertas</a>
        <span>›</span>
        <span><%= (offer && offer.name) ? offer.name : 'Nome da Oferta' %></span>
      </nav>
      <h1 class="tf-offer-title"><%= (offer && offer.name) ? offer.name : 'Nome da Oferta' %></h1>
    </div>

    <div class="tf-head-right">
      <button type="button" class="btn primary" id="btnSaveAll">Salvar Alterações</button>
    </div>
  </header>

  <!-- ABAS PRINCIPAIS -->
  <div class="tf-tabs">
    <button class="tab active" data-tab="principal">Principal</button>
    <button class="tab" data-tab="contingencia">Contingência de Bots</button>
    <button class="tab" data-tab="tracking">Traqueamento</button>
    <button class="tab" data-tab="reports">Fluxo de Relatórios</button>
  </div>

  <!-- ABAS SECUNDÁRIAS (visíveis apenas quando "Principal" estiver ativa) -->
  <div class="tf-subtabs" id="subtabs-principal">
    <button class="subtab active">Front</button>
    <button class="subtab">OrderBump</button>
    <button class="subtab">Upsell</button>
    <button class="subtab">Downsell</button>
    <button class="subtab">Mensagem PIX</button>
    <button class="subtab">Disparos</button>
  </div>

  <!-- Área reservada (vazia por enquanto) -->
  <section class="tf-placeholder"></section>
</main>

<style>
  :root{
    /* Paleta TigerFy Premium (dark, minimalista) */
    --bg-0:#0a0a0a;
    --surface-1:#0f0f0f;
    --surface-2:#131313;
    --line-1:#1e1e1e;
    --line-2:#262626;
    --text-1:#f2f2f2;
    --text-2:#b6b6b6;
    --text-3:#8a8a8a;
    --accent:#ffcc00;       /* dourado */
    --accent-soft:#d4ad15;  /* dourado suave (quase sem brilho) */
  }

  .tiger-offer-shell{
    max-width:1160px;
    margin:0 auto;
    padding:24px 16px 72px;
    color:var(--text-1);
  }

  /* Cabeçalho */
  .tf-header{
    display:flex;
    align-items:flex-end;
    justify-content:space-between;
    gap:16px;
    margin-bottom:18px;
  }
  .tf-head-left{min-width:0}
  .tf-breadcrumb{
    display:flex;gap:8px;align-items:center;
    color:var(--text-3);font-size:.92rem;margin-bottom:6px;
  }
  .tf-breadcrumb a{color:var(--text-3);text-decoration:none}
  .tf-breadcrumb a:hover{color:var(--text-2)}
  .tf-offer-title{
    margin:0;
    font-size:1.8rem;
    letter-spacing:.2px;
    font-weight:700;
    background:linear-gradient(180deg,#fff 20%, #e6e6e6 70%, #bbb 100%);
    -webkit-background-clip:text;background-clip:text;color:transparent;
    filter:drop-shadow(0 0 0 transparent);
  }

  /* Botão principal */
  .btn{
    border:1px solid var(--line-1);
    background:var(--surface-2);
    color:var(--text-1);
    padding:10px 14px;border-radius:12px;
    transition:background .15s,border-color .15s,transform .05s;
  }
  .btn:hover{background:#151515;border-color:var(--line-2)}
  .btn.primary{
    background:linear-gradient(180deg,#171717,#121212);
    border-color:#2a2a2a;
  }
  .btn.primary:hover{background:#161616;border-color:#343434}
  .btn:active{transform:translateY(1px)}

  /* Abas principais */
  .tf-tabs{
    display:flex;gap:10px;justify-content:center;
    margin:10px 0 12px;
  }
  .tab{
    appearance:none;cursor:pointer;
    padding:10px 14px;border-radius:999px;
    background:#101010;border:1px solid var(--line-1);
    color:var(--text-2);font-size:.95rem;
    transition:background .15s,border-color .15s,color .15s;
  }
  .tab:hover{background:#131313;border-color:var(--line-2);color:var(--text-1)}
  .tab.active{
    background:#141414;border-color:#333;
    color:var(--text-1);position:relative;
  }
  .tab.active::after{
    content:"";position:absolute;left:12px;right:12px;bottom:-6px;height:2px;
    background:linear-gradient(90deg,transparent,var(--accent-soft),transparent);
    opacity:.9;border-radius:2px;
  }

  /* Abas secundárias (chips menores) */
  .tf-subtabs{
    display:flex;gap:8px;justify-content:center;
    margin:6px 0 18px;
  }
  .subtab{
    padding:8px 12px;border-radius:999px;
    background:#0f0f0f;border:1px solid var(--line-1);
    color:var(--text-2);font-size:.9rem;cursor:pointer;
    transition:background .15s,border-color .15s,color .15s;
  }
  .subtab:hover{background:#131313;border-color:var(--line-2);color:var(--text-1)}
  .subtab.active{background:#141414;border-color:#303030;color:var(--text-1)}

  /* Placeholder da área de conteúdo (só para dar respiro) */
  .tf-placeholder{
    height:220px;
    border:1px dashed var(--line-2);
    border-radius:18px;
    background:var(--surface-1);
  }

  /* Responsivo */
  @media (max-width:900px){
    .tf-header{flex-direction:column;align-items:flex-start}
    .tf-head-right{width:100%;display:flex;justify-content:flex-end}
  }
</style>

<script>
  // Alterna visibilidade das subtabs: só aparecem quando "Principal" está ativa.
  (function(){
    var mainTabs = document.querySelectorAll('.tf-tabs .tab');
    var subTabsWrap = document.getElementById('subtabs-principal');
    mainTabs.forEach(function(btn){
      btn.addEventListener('click', function(){
        mainTabs.forEach(function(b){ b.classList.remove('active'); });
        btn.classList.add('active');
        var isPrincipal = btn.dataset.tab === 'principal';
        if(subTabsWrap){ subTabsWrap.style.display = isPrincipal ? 'flex' : 'none'; }
      });
    });
    // Estado inicial
    if(subTabsWrap){ subTabsWrap.style.display = 'flex'; }
  })();
</script>
